
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Interaction of BALTRAD and wradlib via ODIM_H5 &#8212; Project Pythia Cookbook Template</title>
    
  <link href="../../_static/css/theme.css" rel="stylesheet">
  <link href="../../_static/css/index.ff1ffe594081f20da1ef19478df9384b.css" rel="stylesheet">

    
  <link rel="stylesheet"
    href="../../_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    
      

    
    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/sphinx-pythia-theme.min.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/mystnb.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/design-style.b7bb847fb20b106c3d81b95245e65545.min.css" />
    
  <link rel="preload" as="script" href="../../_static/js/index.be7d3bbb2ef33a8344ce.js">

    <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/jquery.js"></script>
    <script src="../../_static/underscore.js"></script>
    <script src="../../_static/doctools.js"></script>
    <script src="../../_static/clipboard.min.js"></script>
    <script src="../../_static/copybutton.js"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="../../_static/togglebutton.js"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';</script>
    <script src="../../_static/design-tabs.js"></script>
    <script src="../../_static/sphinx-book-theme.d59cb220de22ca1c485ebbdc042f0030.js"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"
const thebe_selector = ".thebe,.cell"
const thebe_selector_input = "pre"
const thebe_selector_output = ".output, .cell_output"
</script>
    <script async="async" src="../../_static/sphinx-thebe.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="None">
    

    <!-- Google Analytics -->
    
  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="132">
    <div class="container-fluid" id="shim"></div>
    <div class="container-fluid" id="banner"></div>
    <nav class="navbar navbar-dark navbar-expand-lg bg-dark fixed-top bd-navbar shadow" id="navbar-main"><div class="container-xl">

  <div id="navbar-start">
    
    

<a class="navbar-brand" href="https://openradarscience.org/erad2022/README.html">
  <img src="../../_static/erad_white_background.png" class="logo" alt="logo">
</a>


    
  </div>

  <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-collapsible" aria-controls="navbar-collapsible" aria-expanded="false" aria-label="Toggle navigation">
    <span class="navbar-toggler-icon"></span>
  </button>

  
  <div id="navbar-collapsible" class=" collapse navbar-collapse">
    <div id="navbar-center" class="mr-auto">
      
      <div class="navbar-center-item">
        <ul id="navbar-main-elements" class="navbar-nav">
  
  <li class="nav-item">
    
    
    
    <a class="nav-link nav-internal" href="https://www.erad2022.ch">Conference Home</a>
  </li>
  
  <li class="nav-item">
    
    
    
    <a class="nav-link nav-internal" href="https://openradarscience.org">Open Radar Community</a>
  </li>
  
  
</ul>
      </div>
      
    </div>

    <div id="navbar-end">
      
      <div class="navbar-end-item">
        <ul id="navbar-icon-links" class="navbar-nav" aria-label="Icon Links">
        <li class="nav-item">
          <a class="nav-link" href="https://github.com/openradar/erad2022" rel="noopener" target="_blank" title="GitHub">
            <span><i class="fab fa-github-square"></i></span>
            <label class="sr-only">GitHub</label>
          </a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="https://www.youtube.com/channel/UCoZPBqJal5uKpO8ZiwzavCw" rel="noopener" target="_blank" title="YouTube">
            <span><i class="fab fa-youtube-square"></i></span>
            <label class="sr-only">YouTube</label>
          </a>
        </li>
      </ul>
      </div>
      
    </div>
  </div>
</div>
    </nav>
    <div class="container-xl">
      <div class="row">
        
<div class="col-12 col-md-3 bd-sidebar site-navigation show" id="site-navigation">
    
        <form class="bd-search d-flex align-items-center" action="../../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search the docs ..." aria-label="Search the docs ..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item active">
        <ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../../README.html">
   ERAD 2022 Open Radar Science Shortcourse
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Introductions + Overview
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../../open-science/README.html">
   An Overview of Open Science
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../open-radar/README.html">
   Open Radar Community
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Tool Foundations
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../../pyart/README.html">
   Py-ART Tutorial
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" type="checkbox"/>
  <label for="toctree-checkbox-1">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../pyart-basics.html">
     Py-ART Basics
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../pyart-gridding.html">
     Py-ART Gridding
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../../wradlib/README.html">
   Wradlib Tutorial
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" type="checkbox"/>
  <label for="toctree-checkbox-2">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../wradlib_intro.html">
     wradlib introduction
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../baltrad/README.html">
   BALTRAD Tutorial
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../lrose/README.html">
   LROSE Tutorial
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Open Radar Workflows
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../../workflows/README.html">
   Combining Radar Workflows
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Becoming a developer
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../../package-development/README.html">
   Developing Open Source Software Packages
  </a>
 </li>
</ul>

    </div>
</nav> <!-- To handle the deprecated key -->

<div class="navbar_extra_footer">
  Theme by <a href="https://projectpythia.org">Project Pythia</a>.<br><br>

</div>

</div>

        

        <main class="col py-md-3 pl-md-4 bd-content overflow-auto" role="main"><div class="topbar container-xl fixed-top">
    <div class="topbar-contents row">
        <div class="col-12 col-md-3 bd-topbar-whitespace site-navigation show"></div>
        <div class="col pl-md-4 topbar-main">
            
            <button id="navbar-toggler" class="navbar-toggler ml-0" type="button" data-toggle="collapse"
                data-toggle="tooltip" data-placement="bottom" data-target=".site-navigation" aria-controls="navbar-menu"
                aria-expanded="true" aria-label="Toggle navigation" aria-controls="site-navigation"
                title="Toggle navigation" data-toggle="tooltip" data-placement="left">
                <i class="fas fa-bars"></i>
                <i class="fas fa-arrow-left"></i>
                <i class="fas fa-arrow-up"></i>
            </button>
            
            
<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn" aria-label="Download this page"><i
            class="fas fa-download"></i></button>

    <div class="dropdown-buttons">
        <!-- ipynb file if we had a myst markdown file -->
        
        <!-- Download raw file -->
        <a class="dropdown-buttons" href="../../_sources/notebooks/baltrad2wradlib/baltrad2wradlib.ipynb"><button type="button"
                class="btn btn-secondary topbarbtn" title="Download source file" data-toggle="tooltip"
                data-placement="left">.ipynb</button></a>
        <!-- Download PDF via print -->
        <button type="button" id="download-print" class="btn btn-secondary topbarbtn" title="Print to PDF"
                onclick="printPdf(this)" data-toggle="tooltip" data-placement="left">.pdf</button>
    </div>
</div>

            <!-- Source interaction buttons -->

<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn"
        aria-label="Connect with source repository"><i class="fab fa-github"></i></button>
    <div class="dropdown-buttons sourcebuttons">
        <a class="repository-button"
            href="https://github.com/openradar/erad2022"><button type="button" class="btn btn-secondary topbarbtn"
                data-toggle="tooltip" data-placement="left" title="Source repository"><i
                    class="fab fa-github"></i>repository</button></a>
        <a class="issues-button"
            href="https://github.com/openradar/erad2022/issues/new?title=Issue%20on%20page%20%2Fnotebooks/baltrad2wradlib/baltrad2wradlib.html&body=Your%20issue%20content%20here."><button
                type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip" data-placement="left"
                title="Open an issue"><i class="fas fa-lightbulb"></i>open issue</button></a>
        <a class="edit-button" href="https://github.com/openradar/erad2022/edit/main/notebooks/baltrad2wradlib/baltrad2wradlib.ipynb"><button
                type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip" data-placement="left"
                title="Edit this page"><i class="fas fa-pencil-alt"></i>suggest edit</button></a>
    </div>
</div>

            <!-- Full screen (wrap in <a> to have style consistency -->

<a class="full-screen-button"><button type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip"
        data-placement="bottom" onclick="toggleFullScreen()" aria-label="Fullscreen mode"
        title="Fullscreen mode"><i
            class="fas fa-expand"></i></button></a>

            <!-- Launch buttons -->

        </div>

        <!-- Table of contents -->
        <div class="d-none d-md-block col-md-2 bd-toc show noprint">
            
            <div class="tocsection onthispage pt-5 pb-3">
                <i class="fas fa-list"></i> On this page
            </div>
            <nav id="bd-toc-nav" aria-label="Page">
                <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#prepare-your-environment">
   Prepare your environment
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#run-baltrads-odc-toolbox">
   Run BALTRAD’s odc_toolbox
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#read-and-inspect-data-from-suergavere-estonia-before-and-after-qc-with-odc-toolbox">
   Read and inspect data from Suergavere (Estonia) before and after QC with odc_toolbox
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#convert-selected-fields-to-target-units">
   Convert selected fields to target units
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#collect-all-the-information-required-for-georeferencing">
   Collect all the information required for georeferencing
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#design-a-plot-we-will-use-for-all-ppis-in-this-exercise">
   Design a plot we will use for all PPIs in this exercise
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#plot-the-selected-fields-into-one-figure">
   Plot the selected fields into one figure
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#collect-and-plot-the-polarimetric-moments-from-the-original-odim-h5-dataset">
   Collect and plot the polarimetric moments from the original ODIM_H5 dataset
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#try-some-filtering-and-attenuation-correction">
   Try some filtering and attenuation correction
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#compare-results-against-qc-from-odc-toolbox">
   Compare results against QC from odc_toolbox
  </a>
 </li>
</ul>

            </nav>
        </div>
    </div>
</div>
          <div id="main-content" class="row">
            <div class="col-12 col-md-9 pl-md-3 pr-md-0">
              
              <div>
                
  <div class="tex2jax_ignore mathjax_ignore section" id="interaction-of-baltrad-and-wradlib-via-odim-h5">
<h1>Interaction of BALTRAD and wradlib via ODIM_H5<a class="headerlink" href="#interaction-of-baltrad-and-wradlib-via-odim-h5" title="Permalink to this headline"><i class="fas fa-link"></i></a></h1>
<div class="section" id="prepare-your-environment">
<h2>Prepare your environment<a class="headerlink" href="#prepare-your-environment" title="Permalink to this headline"><i class="fas fa-link"></i></a></h2>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">%</span><span class="k">matplotlib</span> inline
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="kn">from</span> <span class="nn">matplotlib.patches</span> <span class="kn">import</span> <span class="n">Polygon</span>
<span class="kn">from</span> <span class="nn">matplotlib.collections</span> <span class="kn">import</span> <span class="n">PatchCollection</span>
<span class="kn">import</span> <span class="nn">matplotlib.ticker</span> <span class="k">as</span> <span class="nn">mticker</span>
<span class="kn">import</span> <span class="nn">wradlib</span>
<span class="kn">import</span> <span class="nn">shapefile</span>
<span class="kn">import</span> <span class="nn">gc</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="run-baltrads-odc-toolbox">
<h2>Run BALTRAD’s odc_toolbox<a class="headerlink" href="#run-baltrads-odc-toolbox" title="Permalink to this headline"><i class="fas fa-link"></i></a></h2>
<p>First, you will process a scan from Suergavere (Estland) by using BALTRAD’s odc_toolbox.</p>
<p>From your VM’s vagrant directory, navigate to the folder <code class="docutils literal notranslate"><span class="pre">/baltrad2wradlib</span></code>.</p>
<p>Execute the following command:</p>
<p><code class="docutils literal notranslate"><span class="pre">$</span> <span class="pre">odc_toolbox</span> <span class="pre">-i</span> <span class="pre">in</span> <span class="pre">-o</span> <span class="pre">out</span> <span class="pre">-q</span> <span class="pre">ropo,radvol-att</span></code></p>
<p>Check whether a file was created in the folder <code class="docutils literal notranslate"><span class="pre">/out</span></code>.</p>
<p><strong>BALTRAD will not create output files if these already exist.</strong> You can check that via <code class="docutils literal notranslate"><span class="pre">!ls</span> <span class="pre">out</span></code>.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">!</span>odc_toolbox -i <span class="k">in</span> -o out -q ropo,radvol-att
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>/usr/share/miniconda3/envs/cookbook-dev/rave/Lib/rave.py:244: SyntaxWarning: &quot;is&quot; with a literal. Did you mean &quot;==&quot;?
  if typ is &#39;dataset&#39;:
/usr/share/miniconda3/envs/cookbook-dev/rave/Lib/rave_info.py:87: SyntaxWarning: &quot;is&quot; with a literal. Did you mean &quot;==&quot;?
  if t is &#39;int&#39;:
/usr/share/miniconda3/envs/cookbook-dev/rave/Lib/rave_info.py:89: SyntaxWarning: &quot;is&quot; with a literal. Did you mean &quot;==&quot;?
  elif t is &#39;float&#39;:
/usr/share/miniconda3/envs/cookbook-dev/rave/Lib/rave_info.py:91: SyntaxWarning: &quot;is&quot; with a literal. Did you mean &quot;==&quot;?
  elif t is &#39;sequence&#39;:
/usr/share/miniconda3/envs/cookbook-dev/rave/Lib/rave_info.py:266: SyntaxWarning: &quot;is not&quot; with a literal. Did you mean &quot;!=&quot;?
  elif path[0] is not &#39;/&#39;:
/usr/share/miniconda3/envs/cookbook-dev/rave/Lib/rave_h5rad.py:164: SyntaxWarning: &quot;is&quot; with a literal. Did you mean &quot;==&quot;?
  elif k is &#39;sets&#39;:
/usr/share/miniconda3/envs/cookbook-dev/rave/Lib/rave_h5rad.py:341: SyntaxWarning: &quot;is&quot; with a literal. Did you mean &quot;==&quot;?
  elif obj is &#39;xsect&#39;:
/usr/share/miniconda3/envs/cookbook-dev/rave/Lib/rave_h5rad.py:351: SyntaxWarning: &quot;is&quot; with a literal. Did you mean &quot;==&quot;?
  elif obj is &#39;vp&#39;:
/usr/share/miniconda3/envs/cookbook-dev/rave/Lib/rave_h5rad.py:360: SyntaxWarning: &quot;is&quot; with a literal. Did you mean &quot;==&quot;?
  elif obj is &#39;thvp&#39;:
/usr/share/miniconda3/envs/cookbook-dev/rave/Lib/rave_h5rad.py:382: SyntaxWarning: &quot;is&quot; with a literal. Did you mean &quot;==&quot;?
  elif obj is &#39;xsect&#39;:
/usr/share/miniconda3/envs/cookbook-dev/rave/Lib/rave_h5rad.py:386: SyntaxWarning: &quot;is&quot; with a literal. Did you mean &quot;==&quot;?
  elif obj is &#39;vp&#39;:
/usr/share/miniconda3/envs/cookbook-dev/rave/Lib/rave_h5rad.py:390: SyntaxWarning: &quot;is&quot; with a literal. Did you mean &quot;==&quot;?
  elif obj is &#39;thvp&#39;:
/usr/share/miniconda3/envs/cookbook-dev/rave/Lib/rave_h5rad.py:394: SyntaxWarning: &quot;is not&quot; with a literal. Did you mean &quot;!=&quot;?
  if obj is not &#39;vp&#39;:
/usr/share/miniconda3/envs/cookbook-dev/rave/Lib/H5radHelper.py:98: SyntaxWarning: &quot;is not&quot; with a literal. Did you mean &quot;!=&quot;?
  if h5typ is not &quot;string&quot;:
/usr/share/miniconda3/envs/cookbook-dev/rave/Lib/H5radHelper.py:105: SyntaxWarning: &quot;is&quot; with a literal. Did you mean &quot;==&quot;?
  if h5typ is &quot;sequence&quot;:
/usr/share/miniconda3/envs/cookbook-dev/rave/Lib/H5radHelper.py:112: SyntaxWarning: &quot;is&quot; with a literal. Did you mean &quot;==&quot;?
  elif h5typ is &quot;dataset&quot;:
/usr/share/miniconda3/envs/cookbook-dev/rave/Lib/H5radHelper.py:117: SyntaxWarning: &quot;is&quot; with a literal. Did you mean &quot;==&quot;?
  elif h5typ is &quot;string&quot;:
/usr/share/miniconda3/envs/cookbook-dev/rave/Lib/H5radHelper.py:140: SyntaxWarning: &quot;is&quot; with a literal. Did you mean &quot;==&quot;?
  if __name__ is &quot;__main__&quot;:
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Exception ignored in: &lt;function _after_at_fork_child_reinit_locks at 0x7f25882139d0&gt;
Traceback (most recent call last):
  File &quot;/usr/share/miniconda3/envs/cookbook-dev/lib/python3.9/logging/__init__.py&quot;, line 255, in _after_at_fork_child_reinit_locks
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>    handler._at_fork_reinit()
  File &quot;/usr/share/miniconda3/envs/cookbook-dev/lib/python3.9/logging/__init__.py&quot;, line 894, in _at_fork_reinit
    self.lock._at_fork_reinit()
AttributeError: &#39;RLock&#39; object has no attribute &#39;_at_fork_reinit&#39;
Exception ignored in: &lt;function _after_at_fork_child_reinit_locks at 0x7f25882139d0&gt;
Traceback (most recent call last):
  File &quot;/usr/share/miniconda3/envs/cookbook-dev/lib/python3.9/logging/__init__.py&quot;, line 255, in _after_at_fork_child_reinit_locks
    handler._at_fork_reinit()
  File &quot;/usr/share/miniconda3/envs/cookbook-dev/lib/python3.9/logging/__init__.py&quot;, line 894, in _at_fork_reinit
    self.lock._at_fork_reinit()
AttributeError: &#39;RLock&#39; object has no attribute &#39;_at_fork_reinit&#39;
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Objects created: 1509
Objects deleted: 1509
Objects pending: 0
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">!</span>ls out
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>201405190715_SUR.h5
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="read-and-inspect-data-from-suergavere-estonia-before-and-after-qc-with-odc-toolbox">
<h2>Read and inspect data from Suergavere (Estonia) before and after QC with odc_toolbox<a class="headerlink" href="#read-and-inspect-data-from-suergavere-estonia-before-and-after-qc-with-odc-toolbox" title="Permalink to this headline"><i class="fas fa-link"></i></a></h2>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Before QC</span>
<span class="n">inp</span> <span class="o">=</span> <span class="n">wradlib</span><span class="o">.</span><span class="n">io</span><span class="o">.</span><span class="n">read_opera_hdf5</span><span class="p">(</span><span class="s2">&quot;in/201405190715_SUR.h5&quot;</span><span class="p">)</span>
<span class="c1"># After QC</span>
<span class="n">out</span> <span class="o">=</span> <span class="n">wradlib</span><span class="o">.</span><span class="n">io</span><span class="o">.</span><span class="n">read_opera_hdf5</span><span class="p">(</span><span class="s2">&quot;out/201405190715_SUR.h5&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Here you can inspect whichever directory you want, e.g.</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;where...</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">inp</span><span class="p">[</span><span class="s1">&#39;where&#39;</span><span class="p">],</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;what...</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">inp</span><span class="p">[</span><span class="s1">&#39;what&#39;</span><span class="p">],</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;dataset1/data1/what...</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">inp</span><span class="p">[</span><span class="s1">&#39;dataset1/data1/what&#39;</span><span class="p">])</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>where...
 {&#39;height&#39;: 157.0, &#39;lat&#39;: 58.482310026884086, &#39;lon&#39;: 25.518660116940737, &#39;towerheight&#39;: 29.0} 

what...
 {&#39;date&#39;: b&#39;20140519&#39;, &#39;object&#39;: b&#39;PVOL&#39;, &#39;source&#39;: b&#39;WMO:26232,RAD:EE41,PLC:S\xc3\xbcrgavere,NOD:eesur&#39;, &#39;time&#39;: b&#39;071500&#39;, &#39;version&#39;: b&#39;H5rad 2.2&#39;} 

dataset1/data1/what...
 {&#39;gain&#39;: 0.5, &#39;nodata&#39;: 255.0, &#39;offset&#39;: -32.0, &#39;quantity&#39;: b&#39;DBZH&#39;, &#39;undetect&#39;: 0.0}
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="convert-selected-fields-to-target-units">
<h2>Convert selected fields to target units<a class="headerlink" href="#convert-selected-fields-to-target-units" title="Permalink to this headline"><i class="fas fa-link"></i></a></h2>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">convert</span><span class="p">(</span><span class="n">dset</span><span class="p">,</span> <span class="nb">dir</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Converts ODIM_H5 data representations to values in target unit and masks missing values.</span>
<span class="sd">    </span>
<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    dset : the hdf5 object returned by wradlib.read_OPERA_hdf5</span>
<span class="sd">    dir : the corresponding directory tree in dset for which the data should be processed</span>
<span class="sd">    </span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">res</span> <span class="o">=</span> <span class="n">dset</span><span class="p">[</span><span class="nb">dir</span><span class="o">+</span><span class="s2">&quot;/data&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">uint16</span><span class="p">)</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">res</span> <span class="o">=</span> <span class="n">res</span> <span class="o">*</span> <span class="n">dset</span><span class="p">[</span><span class="nb">dir</span><span class="o">+</span><span class="s2">&quot;/what&quot;</span><span class="p">][</span><span class="s2">&quot;gain&quot;</span><span class="p">]</span> <span class="o">+</span> <span class="n">dset</span><span class="p">[</span><span class="nb">dir</span><span class="o">+</span><span class="s2">&quot;/what&quot;</span><span class="p">][</span><span class="s2">&quot;offset&quot;</span><span class="p">]</span>
    <span class="k">except</span><span class="p">:</span>
        <span class="k">pass</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">res</span><span class="p">[</span><span class="n">dset</span><span class="p">[</span><span class="nb">dir</span><span class="o">+</span><span class="s2">&quot;/data&quot;</span><span class="p">]</span><span class="o">==</span><span class="n">dset</span><span class="p">[</span><span class="nb">dir</span><span class="o">+</span><span class="s2">&quot;/what&quot;</span><span class="p">][</span><span class="s2">&quot;nodata&quot;</span><span class="p">]]</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span>
    <span class="k">except</span><span class="p">:</span>
        <span class="k">pass</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">res</span><span class="p">[</span><span class="n">dset</span><span class="p">[</span><span class="nb">dir</span><span class="o">+</span><span class="s2">&quot;/data&quot;</span><span class="p">]</span><span class="o">==</span><span class="n">dset</span><span class="p">[</span><span class="nb">dir</span><span class="o">+</span><span class="s2">&quot;/what&quot;</span><span class="p">][</span><span class="s2">&quot;undetect&quot;</span><span class="p">]]</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span>
    <span class="k">except</span><span class="p">:</span>
        <span class="k">pass</span>    

    <span class="k">return</span> <span class="n">res</span>   
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Extract specific data arrays from ODIM_h5 objects</span>
<span class="c1">#    dBZH before QC</span>
<span class="n">before</span><span class="o">=</span> <span class="n">convert</span><span class="p">(</span><span class="n">inp</span><span class="p">,</span> <span class="s2">&quot;dataset1/data1&quot;</span><span class="p">)</span>
<span class="c1">#    dBZH after QC</span>
<span class="n">after</span> <span class="o">=</span> <span class="n">convert</span><span class="p">(</span><span class="n">out</span><span class="p">,</span> <span class="s2">&quot;dataset1/data1&quot;</span><span class="p">)</span>
<span class="c1">#    Quality field 1</span>
<span class="n">qual1</span> <span class="o">=</span> <span class="n">convert</span><span class="p">(</span><span class="n">out</span><span class="p">,</span> <span class="s2">&quot;dataset1/quality1&quot;</span><span class="p">)</span>
<span class="c1">#    Quality field 2</span>
<span class="n">qual2</span> <span class="o">=</span> <span class="n">convert</span><span class="p">(</span><span class="n">out</span><span class="p">,</span> <span class="s2">&quot;dataset1/quality2&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="collect-all-the-information-required-for-georeferencing">
<h2>Collect all the information required for georeferencing<a class="headerlink" href="#collect-all-the-information-required-for-georeferencing" title="Permalink to this headline"><i class="fas fa-link"></i></a></h2>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Collect all the georeferencing information we need</span>
<span class="c1">#   First gate</span>
<span class="n">r0</span> <span class="o">=</span> <span class="n">inp</span><span class="p">[</span><span class="s1">&#39;dataset1/where&#39;</span><span class="p">][</span><span class="s2">&quot;rstart&quot;</span><span class="p">]</span><span class="o">*</span><span class="mf">1000.</span>
<span class="c1">#   Gate length</span>
<span class="n">rscale</span> <span class="o">=</span> <span class="n">inp</span><span class="p">[</span><span class="s1">&#39;dataset1/where&#39;</span><span class="p">][</span><span class="s2">&quot;rscale&quot;</span><span class="p">]</span>
<span class="c1">#   Number of bins per beam</span>
<span class="n">nbins</span> <span class="o">=</span> <span class="n">inp</span><span class="p">[</span><span class="s1">&#39;dataset1/where&#39;</span><span class="p">][</span><span class="s2">&quot;nbins&quot;</span><span class="p">]</span>
<span class="c1">#   Maximum range</span>
<span class="n">maxr</span> <span class="o">=</span> <span class="n">r0</span> <span class="o">+</span> <span class="p">(</span><span class="n">nbins</span><span class="p">)</span><span class="o">*</span><span class="n">rscale</span>
<span class="c1"># Construct array of range gates</span>
<span class="n">r</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="n">r0</span><span class="p">,</span> <span class="n">maxr</span><span class="p">,</span> <span class="n">nbins</span><span class="p">)</span>
<span class="c1"># Construct array of azimuth angles (quick and dirty)</span>
<span class="n">az</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">359</span><span class="p">,</span> <span class="n">inp</span><span class="p">[</span><span class="s1">&#39;dataset1/where&#39;</span><span class="p">][</span><span class="s2">&quot;nrays&quot;</span><span class="p">])</span>
<span class="c1"># Site coordinates (lon,lat)</span>
<span class="n">site</span> <span class="o">=</span> <span class="p">(</span><span class="n">inp</span><span class="p">[</span><span class="s2">&quot;where&quot;</span><span class="p">][</span><span class="s2">&quot;lon&quot;</span><span class="p">],</span> <span class="n">inp</span><span class="p">[</span><span class="s2">&quot;where&quot;</span><span class="p">][</span><span class="s2">&quot;lat&quot;</span><span class="p">],</span> <span class="n">inp</span><span class="p">[</span><span class="s2">&quot;where&quot;</span><span class="p">][</span><span class="s2">&quot;height&quot;</span><span class="p">])</span>
<span class="c1"># Define a projection (Azimuthal Equidistant)</span>
<span class="n">proj</span> <span class="o">=</span> <span class="n">wradlib</span><span class="o">.</span><span class="n">georef</span><span class="o">.</span><span class="n">create_osr</span><span class="p">(</span><span class="s2">&quot;aeqd&quot;</span><span class="p">,</span> <span class="n">lon_0</span><span class="o">=</span><span class="n">site</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">lat_0</span><span class="o">=</span><span class="n">site</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="design-a-plot-we-will-use-for-all-ppis-in-this-exercise">
<h2>Design a plot we will use for all PPIs in this exercise<a class="headerlink" href="#design-a-plot-we-will-use-for-all-ppis-in-this-exercise" title="Permalink to this headline"><i class="fas fa-link"></i></a></h2>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># A little helper funciton to harmonize all plots</span>
<span class="k">def</span> <span class="nf">plot_ppi_to_ax</span><span class="p">(</span><span class="n">ppi</span><span class="p">,</span> <span class="n">ax</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="n">cb</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">cb_label</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="n">cb_shrink</span><span class="o">=</span><span class="mf">0.75</span><span class="p">,</span> <span class="n">bbox</span><span class="o">=</span><span class="p">[</span><span class="o">-</span><span class="n">maxr</span><span class="p">,</span> <span class="n">maxr</span><span class="p">,</span> <span class="o">-</span><span class="n">maxr</span><span class="p">,</span> <span class="n">maxr</span><span class="p">],</span> <span class="n">extend</span><span class="o">=</span><span class="s2">&quot;min&quot;</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;This is the function that we use in this exercise to plot PPIs with uniform georeferencing and style.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># Read, project and plot country shapefile as background</span>
    <span class="c1"># (got that snippet from http://stackoverflow.com/questions/15968762/shapefile-and-matplotlib-plot-polygon-collection-of-shapefile-coordinates)</span>
    <span class="n">sf</span> <span class="o">=</span> <span class="n">shapefile</span><span class="o">.</span><span class="n">Reader</span><span class="p">(</span><span class="s2">&quot;shp/europe_countries.shp&quot;</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s2">&quot;latin1&quot;</span><span class="p">)</span>
    <span class="n">recs</span>    <span class="o">=</span> <span class="n">sf</span><span class="o">.</span><span class="n">records</span><span class="p">()</span>
    <span class="n">shapes</span>  <span class="o">=</span> <span class="n">sf</span><span class="o">.</span><span class="n">shapes</span><span class="p">()</span>
    <span class="n">Nshp</span>    <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">shapes</span><span class="p">)</span>
    <span class="c1"># Iterate over shapes and create matplotlib Polygons</span>
    <span class="k">for</span> <span class="n">nshp</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">Nshp</span><span class="p">):</span>
        <span class="n">ptchs</span>   <span class="o">=</span> <span class="p">[]</span>
        <span class="n">pts</span>     <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">shapes</span><span class="p">[</span><span class="n">nshp</span><span class="p">]</span><span class="o">.</span><span class="n">points</span><span class="p">)</span>
        <span class="n">pts</span> <span class="o">=</span> <span class="n">wradlib</span><span class="o">.</span><span class="n">georef</span><span class="o">.</span><span class="n">reproject</span><span class="p">(</span><span class="n">pts</span><span class="p">,</span> <span class="n">projection_target</span><span class="o">=</span><span class="n">proj</span><span class="p">)</span>
        <span class="n">prt</span>     <span class="o">=</span> <span class="n">shapes</span><span class="p">[</span><span class="n">nshp</span><span class="p">]</span><span class="o">.</span><span class="n">parts</span>
        <span class="n">par</span>     <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">prt</span><span class="p">)</span> <span class="o">+</span> <span class="p">[</span><span class="n">pts</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]]</span>
        <span class="k">for</span> <span class="n">pij</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">prt</span><span class="p">)):</span>
            <span class="n">ptchs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">Polygon</span><span class="p">(</span><span class="n">pts</span><span class="p">[</span><span class="n">par</span><span class="p">[</span><span class="n">pij</span><span class="p">]:</span><span class="n">par</span><span class="p">[</span><span class="n">pij</span><span class="o">+</span><span class="mi">1</span><span class="p">]]))</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">add_collection</span><span class="p">(</span><span class="n">PatchCollection</span><span class="p">(</span><span class="n">ptchs</span><span class="p">,</span><span class="n">facecolor</span><span class="o">=</span><span class="s2">&quot;lightgrey&quot;</span><span class="p">,</span><span class="n">edgecolor</span><span class="o">=</span><span class="s1">&#39;k&#39;</span><span class="p">,</span> <span class="n">linewidths</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">zorder</span><span class="o">=-</span><span class="mi">1</span><span class="p">))</span>


    <span class="c1"># use wradlib.vis.plot_ppi</span>
    <span class="n">ax</span><span class="p">,</span> <span class="n">pm</span> <span class="o">=</span> <span class="n">wradlib</span><span class="o">.</span><span class="n">vis</span><span class="o">.</span><span class="n">plot_ppi</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">ma</span><span class="o">.</span><span class="n">masked_invalid</span><span class="p">(</span><span class="n">ppi</span><span class="p">),</span> <span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">,</span> <span class="n">r</span><span class="o">=</span><span class="n">r</span><span class="p">,</span> <span class="n">az</span><span class="o">=</span><span class="n">az</span><span class="p">,</span> <span class="n">site</span><span class="o">=</span><span class="n">site</span><span class="p">,</span> <span class="n">proj</span><span class="o">=</span><span class="n">proj</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
    <span class="c1"># and plot a cross hair</span>
    <span class="n">ax</span> <span class="o">=</span> <span class="n">wradlib</span><span class="o">.</span><span class="n">vis</span><span class="o">.</span><span class="n">plot_ppi_crosshair</span><span class="p">(</span><span class="n">site</span><span class="o">=</span><span class="n">site</span><span class="p">,</span> <span class="n">ranges</span><span class="o">=</span><span class="p">[</span><span class="mi">50000</span><span class="p">,</span> <span class="mi">100000</span><span class="p">,</span><span class="mi">150000</span><span class="p">,</span> <span class="mi">200000</span><span class="p">,</span> <span class="n">maxr</span><span class="p">],</span> <span class="n">angles</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">90</span><span class="p">,</span> <span class="mi">180</span><span class="p">,</span> <span class="mi">270</span><span class="p">],</span> 
                                        <span class="n">proj</span><span class="o">=</span><span class="n">proj</span><span class="p">,</span> <span class="n">elev</span><span class="o">=</span><span class="mf">0.5</span><span class="p">,</span> <span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">)</span>
    <span class="c1">##plt.text(x=-244000, y=-60000,s=&quot;250km&quot;, color=&quot;gray&quot;, rotation=-69)</span>
    <span class="c1">##plt.text(x=-192000, y=-60000,s=&quot;200km&quot;, color=&quot;gray&quot;, rotation=-67)</span>
    <span class="c1">##plt.text(x=-138000, y=-60000,s=&quot;150km&quot;, color=&quot;gray&quot;, rotation=-65)</span>
    
      
    <span class="c1"># Do our final decorations</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">xlim</span><span class="p">(</span><span class="n">bbox</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">bbox</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">ylim</span><span class="p">(</span><span class="n">bbox</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="n">bbox</span><span class="p">[</span><span class="mi">3</span><span class="p">])</span>
    <span class="c1"># set title</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="n">title</span><span class="p">)</span>
    <span class="c1"># convert axes unit from meters to kilometers</span>
    <span class="n">xticks_loc</span> <span class="o">=</span> <span class="n">ax</span><span class="o">.</span><span class="n">get_xticks</span><span class="p">()</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>
    <span class="n">yticks_loc</span> <span class="o">=</span> <span class="n">ax</span><span class="o">.</span><span class="n">get_yticks</span><span class="p">()</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">xaxis</span><span class="o">.</span><span class="n">set_major_locator</span><span class="p">(</span><span class="n">mticker</span><span class="o">.</span><span class="n">FixedLocator</span><span class="p">(</span><span class="n">xticks_loc</span><span class="p">))</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">set_major_locator</span><span class="p">(</span><span class="n">mticker</span><span class="o">.</span><span class="n">FixedLocator</span><span class="p">(</span><span class="n">yticks_loc</span><span class="p">))</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_xticklabels</span><span class="p">([</span><span class="s1">&#39;</span><span class="si">%g</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="mf">0.001</span><span class="o">*</span><span class="n">l</span><span class="p">)</span> <span class="k">for</span> <span class="n">l</span> <span class="ow">in</span> <span class="n">ax</span><span class="o">.</span><span class="n">get_xticks</span><span class="p">()])</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_yticklabels</span><span class="p">([</span><span class="s1">&#39;</span><span class="si">%g</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="mf">0.001</span><span class="o">*</span><span class="n">l</span><span class="p">)</span> <span class="k">for</span> <span class="n">l</span> <span class="ow">in</span> <span class="n">ax</span><span class="o">.</span><span class="n">get_yticks</span><span class="p">()])</span>
    <span class="c1"># set axes lables</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s2">&quot;x coordinates (km)&quot;</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="s2">&quot;large&quot;</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s2">&quot;y coordinates (km)&quot;</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="s2">&quot;large&quot;</span><span class="p">)</span>
    <span class="c1"># plot colorbar   </span>
    <span class="k">if</span> <span class="n">cb</span><span class="p">:</span>
        <span class="n">cbar</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">colorbar</span><span class="p">(</span><span class="n">pm</span><span class="p">,</span> <span class="n">shrink</span><span class="o">=</span><span class="n">cb_shrink</span><span class="p">,</span> <span class="n">orientation</span><span class="o">=</span><span class="s2">&quot;horizontal&quot;</span><span class="p">,</span> <span class="n">extend</span><span class="o">=</span><span class="n">extend</span><span class="p">,</span> <span class="n">pad</span><span class="o">=</span><span class="mf">0.1</span><span class="p">)</span>
        <span class="n">cbar</span><span class="o">.</span><span class="n">set_label</span><span class="p">(</span><span class="n">cb_label</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="s2">&quot;large&quot;</span><span class="p">)</span>
    
    <span class="n">gc</span><span class="o">.</span><span class="n">collect</span><span class="p">()</span>
    
    <span class="k">return</span> <span class="n">ax</span><span class="p">,</span> <span class="n">pm</span>
    
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="plot-the-selected-fields-into-one-figure">
<h2>Plot the selected fields into one figure<a class="headerlink" href="#plot-the-selected-fields-into-one-figure" title="Permalink to this headline"><i class="fas fa-link"></i></a></h2>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">fig</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">12</span><span class="p">,</span><span class="mi">10</span><span class="p">))</span>

<span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplot</span><span class="p">(</span><span class="mi">221</span><span class="p">,</span> <span class="n">aspect</span><span class="o">=</span><span class="s2">&quot;equal&quot;</span><span class="p">)</span>
<span class="n">ax</span><span class="p">,</span> <span class="n">pm</span> <span class="o">=</span> <span class="n">plot_ppi_to_ax</span><span class="p">(</span><span class="n">before</span><span class="p">,</span> <span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="s2">&quot;Before QC&quot;</span><span class="p">,</span> <span class="n">cb</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">vmin</span><span class="o">=-</span><span class="mi">10</span><span class="p">,</span> <span class="n">vmax</span><span class="o">=</span><span class="mi">65</span><span class="p">)</span>

<span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplot</span><span class="p">(</span><span class="mi">222</span><span class="p">,</span> <span class="n">aspect</span><span class="o">=</span><span class="s2">&quot;equal&quot;</span><span class="p">)</span>
<span class="n">ax</span><span class="p">,</span> <span class="n">pm</span> <span class="o">=</span> <span class="n">plot_ppi_to_ax</span><span class="p">(</span><span class="n">after</span><span class="p">,</span>  <span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="s2">&quot;After QC&quot;</span><span class="p">,</span>  <span class="n">cb</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">vmin</span><span class="o">=-</span><span class="mi">10</span><span class="p">,</span> <span class="n">vmax</span><span class="o">=</span><span class="mi">65</span><span class="p">)</span>

<span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplot</span><span class="p">(</span><span class="mi">223</span><span class="p">,</span> <span class="n">aspect</span><span class="o">=</span><span class="s2">&quot;equal&quot;</span><span class="p">)</span>
<span class="n">ax</span><span class="p">,</span> <span class="n">qm</span> <span class="o">=</span> <span class="n">plot_ppi_to_ax</span><span class="p">(</span><span class="n">qual1</span><span class="p">,</span>  <span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="s2">&quot;Quality 1&quot;</span><span class="p">,</span> <span class="n">cb</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

<span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplot</span><span class="p">(</span><span class="mi">224</span><span class="p">,</span> <span class="n">aspect</span><span class="o">=</span><span class="s2">&quot;equal&quot;</span><span class="p">)</span>
<span class="n">ax</span><span class="p">,</span> <span class="n">qm</span> <span class="o">=</span> <span class="n">plot_ppi_to_ax</span><span class="p">(</span><span class="n">qual2</span><span class="p">,</span>  <span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="s2">&quot;Quality 2&quot;</span><span class="p">,</span> <span class="n">cb</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

<span class="n">plt</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">()</span>

<span class="c1"># Add colorbars</span>
<span class="n">fig</span><span class="o">.</span><span class="n">subplots_adjust</span><span class="p">(</span><span class="n">right</span><span class="o">=</span><span class="mf">0.9</span><span class="p">)</span>
<span class="n">cax</span> <span class="o">=</span> <span class="n">fig</span><span class="o">.</span><span class="n">add_axes</span><span class="p">((</span><span class="mf">0.9</span><span class="p">,</span> <span class="mf">0.6</span><span class="p">,</span> <span class="mf">0.03</span><span class="p">,</span> <span class="mf">0.3</span><span class="p">))</span>
<span class="n">cbar</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">colorbar</span><span class="p">(</span><span class="n">pm</span><span class="p">,</span> <span class="n">cax</span><span class="o">=</span><span class="n">cax</span><span class="p">)</span>
<span class="n">cbar</span><span class="o">.</span><span class="n">set_label</span><span class="p">(</span><span class="s2">&quot;Horizontal reflectivity (dBZ)&quot;</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="s2">&quot;large&quot;</span><span class="p">)</span>

<span class="n">cax</span> <span class="o">=</span> <span class="n">fig</span><span class="o">.</span><span class="n">add_axes</span><span class="p">((</span><span class="mf">0.9</span><span class="p">,</span> <span class="mf">0.1</span><span class="p">,</span> <span class="mf">0.03</span><span class="p">,</span> <span class="mf">0.3</span><span class="p">))</span>
<span class="n">cbar</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">colorbar</span><span class="p">(</span><span class="n">qm</span><span class="p">,</span> <span class="n">cax</span><span class="o">=</span><span class="n">cax</span><span class="p">)</span>
<span class="n">cbar</span><span class="o">.</span><span class="n">set_label</span><span class="p">(</span><span class="s2">&quot;Quality index&quot;</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="s2">&quot;large&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../../_images/baltrad2wradlib_19_0.png" src="../../_images/baltrad2wradlib_19_0.png" />
</div>
</div>
</div>
<div class="section" id="collect-and-plot-the-polarimetric-moments-from-the-original-odim-h5-dataset">
<h2>Collect and plot the polarimetric moments from the original ODIM_H5 dataset<a class="headerlink" href="#collect-and-plot-the-polarimetric-moments-from-the-original-odim-h5-dataset" title="Permalink to this headline"><i class="fas fa-link"></i></a></h2>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># We organise the moments as a dictionary</span>
<span class="n">moments</span> <span class="o">=</span> <span class="p">{}</span>
<span class="n">moments</span><span class="p">[</span><span class="s2">&quot;rho&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">convert</span><span class="p">(</span><span class="n">inp</span><span class="p">,</span> <span class="s2">&quot;dataset1/data2&quot;</span><span class="p">)</span>     <span class="c1"># RhoHV</span>
<span class="n">moments</span><span class="p">[</span><span class="s2">&quot;phi&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">convert</span><span class="p">(</span><span class="n">inp</span><span class="p">,</span> <span class="s2">&quot;dataset1/data4&quot;</span><span class="p">)</span>     <span class="c1"># PhiDP</span>
<span class="n">moments</span><span class="p">[</span><span class="s2">&quot;zdr&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">convert</span><span class="p">(</span><span class="n">inp</span><span class="p">,</span> <span class="s2">&quot;dataset1/data5&quot;</span><span class="p">)</span>     <span class="c1"># ZDR - the value range is not plausible, is it? What went wrong?</span>
<span class="n">moments</span><span class="p">[</span><span class="s2">&quot;dop&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">convert</span><span class="p">(</span><span class="n">inp</span><span class="p">,</span> <span class="s2">&quot;dataset1/data10&quot;</span><span class="p">)</span>    <span class="c1"># Doppler velocity</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">fig</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">12</span><span class="p">,</span><span class="mi">12</span><span class="p">))</span>

<span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplot</span><span class="p">(</span><span class="mi">221</span><span class="p">,</span> <span class="n">aspect</span><span class="o">=</span><span class="s2">&quot;equal&quot;</span><span class="p">)</span>
<span class="n">ax</span><span class="p">,</span> <span class="n">pm</span> <span class="o">=</span> <span class="n">plot_ppi_to_ax</span><span class="p">(</span><span class="n">moments</span><span class="p">[</span><span class="s2">&quot;rho&quot;</span><span class="p">],</span> <span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="s2">&quot;RhoHV&quot;</span><span class="p">,</span> <span class="n">cb_label</span><span class="o">=</span><span class="s2">&quot;(-)&quot;</span><span class="p">,</span> <span class="n">cb_shrink</span><span class="o">=</span><span class="mf">0.6</span><span class="p">,</span> <span class="n">extend</span><span class="o">=</span><span class="s2">&quot;neither&quot;</span><span class="p">)</span>

<span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplot</span><span class="p">(</span><span class="mi">222</span><span class="p">,</span> <span class="n">aspect</span><span class="o">=</span><span class="s2">&quot;equal&quot;</span><span class="p">)</span>
<span class="n">ax</span><span class="p">,</span> <span class="n">pm</span> <span class="o">=</span> <span class="n">plot_ppi_to_ax</span><span class="p">(</span><span class="n">moments</span><span class="p">[</span><span class="s2">&quot;phi&quot;</span><span class="p">],</span> <span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="s2">&quot;PhiDP&quot;</span><span class="p">,</span> <span class="n">cb_label</span><span class="o">=</span><span class="s2">&quot;degree&quot;</span><span class="p">,</span> <span class="n">cb_shrink</span><span class="o">=</span><span class="mf">0.6</span><span class="p">,</span> <span class="n">extend</span><span class="o">=</span><span class="s2">&quot;neither&quot;</span><span class="p">)</span>

<span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplot</span><span class="p">(</span><span class="mi">223</span><span class="p">,</span> <span class="n">aspect</span><span class="o">=</span><span class="s2">&quot;equal&quot;</span><span class="p">)</span>
<span class="n">ax</span><span class="p">,</span> <span class="n">pm</span> <span class="o">=</span> <span class="n">plot_ppi_to_ax</span><span class="p">(</span><span class="n">moments</span><span class="p">[</span><span class="s2">&quot;zdr&quot;</span><span class="p">],</span> <span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="s2">&quot;Differential reflectivity&quot;</span><span class="p">,</span> <span class="n">cb_label</span><span class="o">=</span><span class="s2">&quot;dB&quot;</span><span class="p">,</span> <span class="n">cb_shrink</span><span class="o">=</span><span class="mf">0.6</span><span class="p">,</span> <span class="n">extend</span><span class="o">=</span><span class="s2">&quot;neither&quot;</span><span class="p">)</span>

<span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplot</span><span class="p">(</span><span class="mi">224</span><span class="p">,</span> <span class="n">aspect</span><span class="o">=</span><span class="s2">&quot;equal&quot;</span><span class="p">)</span>
<span class="n">ax</span><span class="p">,</span> <span class="n">pm</span> <span class="o">=</span> <span class="n">plot_ppi_to_ax</span><span class="p">(</span><span class="n">moments</span><span class="p">[</span><span class="s2">&quot;dop&quot;</span><span class="p">],</span> <span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="s2">&quot;Doppler velocity&quot;</span><span class="p">,</span> <span class="n">cb_label</span><span class="o">=</span><span class="s2">&quot;m/s&quot;</span><span class="p">,</span> <span class="n">cb_shrink</span><span class="o">=</span><span class="mf">0.6</span><span class="p">,</span> <span class="n">extend</span><span class="o">=</span><span class="s2">&quot;neither&quot;</span><span class="p">)</span>

<span class="n">plt</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../../_images/baltrad2wradlib_22_0.png" src="../../_images/baltrad2wradlib_22_0.png" />
</div>
</div>
</div>
<div class="section" id="try-some-filtering-and-attenuation-correction">
<h2>Try some filtering and attenuation correction<a class="headerlink" href="#try-some-filtering-and-attenuation-correction" title="Permalink to this headline"><i class="fas fa-link"></i></a></h2>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Set ZH to a very low value where we do not expect valid data</span>
<span class="n">zh_filtered</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">isnan</span><span class="p">(</span><span class="n">before</span><span class="p">),</span> <span class="o">-</span><span class="mf">32.</span><span class="p">,</span> <span class="n">before</span><span class="p">)</span>
<span class="c1"># Retrieve PIA by using some constraints (see http://wradlib.bitbucket.org/atten.html for help)</span>
<span class="n">pia</span> <span class="o">=</span> <span class="n">wradlib</span><span class="o">.</span><span class="n">atten</span><span class="o">.</span><span class="n">correct_attenuation_constrained</span><span class="p">(</span><span class="n">zh_filtered</span><span class="p">,</span>
                                                  <span class="n">constraints</span><span class="o">=</span><span class="p">[</span><span class="n">wradlib</span><span class="o">.</span><span class="n">atten</span><span class="o">.</span><span class="n">constraint_dbz</span><span class="p">,</span>
                                                               <span class="n">wradlib</span><span class="o">.</span><span class="n">atten</span><span class="o">.</span><span class="n">constraint_pia</span><span class="p">],</span>
                                                  <span class="n">constraint_args</span><span class="o">=</span><span class="p">[[</span><span class="mf">64.0</span><span class="p">],</span>
                                                                   <span class="p">[</span><span class="mf">20.0</span><span class="p">]])</span>
<span class="c1"># Correct reflectivity by PIA</span>
<span class="n">after2</span> <span class="o">=</span> <span class="n">before</span> <span class="o">+</span> <span class="n">pia</span>
<span class="c1"># Mask out non-meteorological echoes</span>
<span class="n">after2</span><span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">isnan</span><span class="p">(</span><span class="n">before</span><span class="p">)]</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>/usr/share/miniconda3/envs/cookbook-dev/lib/python3.9/site-packages/wradlib/trafo.py:261: RuntimeWarning: overflow encountered in power
  return 10.0 ** (x / 10.0)
/usr/share/miniconda3/envs/cookbook-dev/lib/python3.9/site-packages/wradlib/atten.py:331: DeprecationWarning: Please use `binary_dilation` from the `scipy.ndimage` namespace, the `scipy.ndimage.morphology` namespace is deprecated.
  forward_large_sectors[iii] = ndimage.morphology.binary_dilation(
/usr/share/miniconda3/envs/cookbook-dev/lib/python3.9/site-packages/wradlib/atten.py:334: DeprecationWarning: Please use `binary_dilation` from the `scipy.ndimage` namespace, the `scipy.ndimage.morphology` namespace is deprecated.
  backward_large_sectors[iii] = ndimage.morphology.binary_dilation(
/usr/share/miniconda3/envs/cookbook-dev/lib/python3.9/site-packages/wradlib/atten.py:331: DeprecationWarning: Please use `binary_dilation` from the `scipy.ndimage` namespace, the `scipy.ndimage.morphology` namespace is deprecated.
  forward_large_sectors[iii] = ndimage.morphology.binary_dilation(
/usr/share/miniconda3/envs/cookbook-dev/lib/python3.9/site-packages/wradlib/atten.py:334: DeprecationWarning: Please use `binary_dilation` from the `scipy.ndimage` namespace, the `scipy.ndimage.morphology` namespace is deprecated.
  backward_large_sectors[iii] = ndimage.morphology.binary_dilation(
/usr/share/miniconda3/envs/cookbook-dev/lib/python3.9/site-packages/wradlib/atten.py:331: DeprecationWarning: Please use `binary_dilation` from the `scipy.ndimage` namespace, the `scipy.ndimage.morphology` namespace is deprecated.
  forward_large_sectors[iii] = ndimage.morphology.binary_dilation(
/usr/share/miniconda3/envs/cookbook-dev/lib/python3.9/site-packages/wradlib/atten.py:334: DeprecationWarning: Please use `binary_dilation` from the `scipy.ndimage` namespace, the `scipy.ndimage.morphology` namespace is deprecated.
  backward_large_sectors[iii] = ndimage.morphology.binary_dilation(
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="compare-results-against-qc-from-odc-toolbox">
<h2>Compare results against QC from odc_toolbox<a class="headerlink" href="#compare-results-against-qc-from-odc-toolbox" title="Permalink to this headline"><i class="fas fa-link"></i></a></h2>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">fig</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">18</span><span class="p">,</span><span class="mi">10</span><span class="p">))</span>
<span class="n">bbox</span> <span class="o">=</span> <span class="p">[</span><span class="o">-</span><span class="n">maxr</span><span class="o">-</span><span class="mi">2000</span><span class="p">,</span><span class="o">-</span><span class="mi">100000</span><span class="p">,</span> <span class="o">-</span><span class="mi">100000</span><span class="p">,</span> <span class="mi">100000</span><span class="p">]</span>
<span class="n">shrink</span> <span class="o">=</span> <span class="mf">0.8</span>

<span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplot</span><span class="p">(</span><span class="mi">131</span><span class="p">,</span> <span class="n">aspect</span><span class="o">=</span><span class="s2">&quot;equal&quot;</span><span class="p">)</span>
<span class="n">ax</span><span class="p">,</span> <span class="n">pm</span> <span class="o">=</span> <span class="n">plot_ppi_to_ax</span><span class="p">(</span><span class="n">before</span><span class="p">,</span> <span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="s2">&quot;Before QC&quot;</span><span class="p">,</span> <span class="n">cb_label</span><span class="o">=</span><span class="s2">&quot;Horizontal reflectivity (dBZ)&quot;</span><span class="p">,</span> 
                        <span class="n">cb_shrink</span><span class="o">=</span><span class="n">shrink</span><span class="p">,</span> <span class="n">bbox</span><span class="o">=</span><span class="n">bbox</span><span class="p">,</span> <span class="n">vmin</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">vmax</span><span class="o">=</span><span class="mi">65</span><span class="p">)</span>


<span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplot</span><span class="p">(</span><span class="mi">132</span><span class="p">,</span> <span class="n">aspect</span><span class="o">=</span><span class="s2">&quot;equal&quot;</span><span class="p">)</span>
<span class="n">ax</span><span class="p">,</span> <span class="n">pm</span> <span class="o">=</span> <span class="n">plot_ppi_to_ax</span><span class="p">(</span><span class="n">after</span><span class="p">,</span>  <span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="s2">&quot;After QC using BALTRAD Toolbox&quot;</span><span class="p">,</span> <span class="n">cb_label</span><span class="o">=</span><span class="s2">&quot;Horizontal reflectivity (dBZ)&quot;</span><span class="p">,</span> 
                        <span class="n">cb_shrink</span><span class="o">=</span><span class="n">shrink</span><span class="p">,</span> <span class="n">bbox</span><span class="o">=</span><span class="n">bbox</span><span class="p">,</span> <span class="n">vmin</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">vmax</span><span class="o">=</span><span class="mi">65</span><span class="p">)</span>


<span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplot</span><span class="p">(</span><span class="mi">133</span><span class="p">,</span> <span class="n">aspect</span><span class="o">=</span><span class="s2">&quot;equal&quot;</span><span class="p">)</span>
<span class="n">ax</span><span class="p">,</span> <span class="n">pm</span> <span class="o">=</span> <span class="n">plot_ppi_to_ax</span><span class="p">(</span><span class="n">after2</span><span class="p">,</span> <span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="s2">&quot;After QC using wradlib&quot;</span><span class="p">,</span> <span class="n">cb_label</span><span class="o">=</span><span class="s2">&quot;Horizontal reflectivity (dBZ)&quot;</span><span class="p">,</span> 
                        <span class="n">cb_shrink</span><span class="o">=</span><span class="n">shrink</span><span class="p">,</span> <span class="n">bbox</span><span class="o">=</span><span class="n">bbox</span><span class="p">,</span> <span class="n">vmin</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">vmax</span><span class="o">=</span><span class="mi">65</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../../_images/baltrad2wradlib_26_0.png" src="../../_images/baltrad2wradlib_26_0.png" />
</div>
</div>
</div>
</div>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            kernelName: "python3",
            path: "./notebooks/baltrad2wradlib"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

              </div>
              <!-- Previous / next buttons -->
<div class='prev-next-area'>
</div>
            </div>
          </div>
        </main>

      </div>
    </div>
  
  <script src="../../_static/js/index.be7d3bbb2ef33a8344ce.js"></script>

<footer class="footer">
  <div class="container-fluid m-0 p-0">
  
    <div class="footer-item">
    
  <div class="container-fluid footer-logos">
    <div class="container-xl">
      <div class="row d-flex flex-wrap align-items-center">
        <div class="d-flex col-lg-3 col-md-4 col-sm-6 p-2 mx-auto">
          <img alt="Meteoswiss" src="../../_images/meteoswiss_logo.svg" style="width: 100%">
        </div>
        <div class="d-flex col-lg-3 col-md-4 col-sm-6 p-2 mx-auto">
          <img alt="ARM" src="../../_images/arm_logo.png" style="width: 100%">
        </div>
        <div class="d-flex col-lg-3 col-md-4 col-sm-6 p-2 mx-auto">
          <img alt="Argonne" src="../../_images/argonne_logo.png" style="width: 100%">
        </div>
        <div class="d-flex col-lg-3 col-md-4 col-sm-6 p-2 mx-auto">
          <img alt="Bonne" src="../../_images/university_bonn.png" style="width: 100%">
        </div>
        <div class="d-flex col-lg-3 col-md-4 col-sm-6 p-2 mx-auto">
          <img alt="Canada" src="../../_images/environment_canada_logo.svg" style="width: 100%">
        </div>
        <div class="d-flex col-lg-3 col-md-4 col-sm-6 p-2 mx-auto">
          <img alt="NCAR" src="../../_images/NCAR-contemp-logo-blue.svg" style="width: 100%">
        </div>
      </div>
    </div>
  </div>
    </div>
  
    <div class="footer-item">
    
    </div>
  
    <div class="footer-item">
      <div class="container-fluid footer-info">
    <div class="container-xl">
      <div class="d-flex justify-content-center">
        <p class="py-1 m-0">
            &copy;&nbsp;2022.
        
          By The Open Radar Community.
        
          Last updated on 6 July 2022.
        </p>
      </div>
    </div>
  </div>
    </div>
  
    <div class="footer-item">
    
    </div>
  
  </div>
</footer>
  </body>
</html>